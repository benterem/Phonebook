(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),a=t.n(c),r=t(6),o=t(3),u=t(1),i=t(4),s=t.n(i),d="/api/persons",b=function(){return s.a.get(d).then((function(e){return e.data}))},l=function(e){return s.a.post(d,e).then((function(e){return e.data}))},j=function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},f=function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},h=t(0),m=function(e){var n=e.search,t=e.handleFunction;return Object(h.jsxs)("div",{children:["search: ",Object(h.jsx)("input",{value:n,onChange:t})]})},O=function(e){var n=e.name,t=e.number,c=e.deleteContact;return Object(h.jsxs)("p",{children:[n," : ",t," ",Object(h.jsx)("button",{onClick:c,children:"delete"})]})},g=function(e){return Object(h.jsxs)("form",{onSubmit:e.addContact,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.style,t=e.message;return null===t?null:Object(h.jsx)("div",{style:n,children:t})},x=function(e){var n=e.message;return Object(h.jsx)(p,{message:n,style:{color:"green",background:"lightgrey",fontStyle:"bold",fontSize:16,borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}})},v=function(e){var n=e.message;return Object(h.jsx)(p,{message:n,style:{color:"red",background:"lightgrey",fontStyle:"bold",fontSize:16,borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}})},y=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],a=Object(u.useState)(""),i=Object(o.a)(a,2),s=i[0],d=i[1],p=Object(u.useState)(""),y=Object(o.a)(p,2),C=y[0],S=y[1],w=Object(u.useState)(""),k=Object(o.a)(w,2),N=k[0],B=k[1],D=Object(u.useState)([]),z=Object(o.a)(D,2),A=z[0],E=z[1],F=Object(u.useState)(null),I=Object(o.a)(F,2),J=I[0],L=I[1],R=Object(u.useState)(null),T=Object(o.a)(R,2),P=T[0],q=T[1];Object(u.useEffect)((function(){b().then((function(e){c(e),E(e)}))}),[]);var G=function(e,n){n?(L(e),setTimeout((function(){return L(null)}),5e3)):(q(e),setTimeout((function(){return q(null)}),5e3))},H=function(e,n){window.confirm("Delete ".concat(e,"?")),j(n).then((function(){console.log(H)})).catch((function(n){G("Information of ".concat(e," has already been removed from the server"),!1)})).finally((function(){c(t.filter((function(e){return e.id!==n}))),E(t.filter((function(e){return e.id!==n})))}))};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(x,{message:J}),Object(h.jsx)(v,{message:P}),Object(h.jsx)("br",{}),Object(h.jsx)(m,{search:N,handleFunction:function(e){B(e.target.value),0===e.target.value.length?E(t):E(A.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())})))}}),Object(h.jsx)("h2",{children:"Add Contact"}),Object(h.jsx)(g,{addContact:function(e){e.preventDefault();var n=t.find((function(e){return e.name===s}));if(n)window.confirm("".concat(s," is already added to phonebook. Do you want to update their number?"))&&function(e,n){var a=e.id,o=Object(r.a)(Object(r.a)({},e),{},{number:n});f(a,o).then((function(e){c(t.map((function(n){return n.id!==a?n:e}))),E(t.map((function(n){return n.id!==a?n:e}))),G("".concat(e.name,"'s number updated to: ").concat(e.number),!0)}))}(n,C);else if(t.find((function(e){return e.number===C})))alert("".concat(C," is already added to phone book"));else{l({name:s,number:C}).then((function(e){c(t.concat(e)),E(A.concat(e)),G("Added ".concat(e.name),!0)}))}d(""),S("")},newName:s,handleNameChange:function(e){d(e.target.value)},newNumber:C,handleNumberChange:function(e){S(e.target.value)}}),Object(h.jsx)("h2",{children:"Numbers"}),A.map((function(e,n){return Object(h.jsx)(O,{name:e.name,number:e.number,deleteContact:function(){return H(e.name,e.id)}},n)}))]})};t(39);a.a.render(Object(h.jsx)(y,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.05b54bb2.chunk.js.map